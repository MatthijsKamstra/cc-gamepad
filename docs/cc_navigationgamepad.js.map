{
"version":3,
"file":"cc_navigationgamepad.js",
"sourceRoot":"file:///",
"sources":["/Users/matthijs/Documents/GIT/cc-gamepad/src/CCGamepad.hx","/Users/matthijs/Documents/GIT/cc-gamepad/src/model/constants/App.hx","/Users/matthijs/Documents/GIT/cc-gamepad/src/NavigationGamepad.hx","/Users/matthijs/Documents/GIT/cc-gamepad/src/SNES.hx","/usr/local/lib/haxe/std/js/_std/Std.hx","/usr/local/lib/haxe/std/js/_std/haxe/Exception.hx","/usr/local/lib/haxe/std/haxe/ValueException.hx","/usr/local/lib/haxe/std/js/_std/haxe/ds/IntMap.hx","/usr/local/lib/haxe/std/js/_std/haxe/ds/StringMap.hx","/usr/local/lib/haxe/std/haxe/iterators/ArrayIterator.hx","/usr/local/lib/haxe/std/js/Boot.hx"],
"sourcesContent":["package;\n\nimport haxe.Constraints.Function;\nimport js.html.SpanElement;\nimport js.html.ProgressElement;\nimport js.Browser.*;\nimport js.Browser.navigator;\nimport js.html.Gamepad;\nimport js.html.GamepadButton;\nimport js.html.GamepadEvent;\nimport js.html.DivElement;\n\nusing StringTools;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n// https://github.com/luser/gamepadtest/blob/master/gamepadtest.js\n// checked in firefox and Chrome.. the rest I don't use\nclass CCGamepad {\n\tvar btnMap:Map<Int, SpanElement> = [];\n\tvar axisMap:Map<Int, ProgressElement> = [];\n\tvar btnNameField:DivElement;\n\tvar start:Int; // requestAnimationFrame\n\n\tprivate var _options:SettingsObject = cast {};\n\n\t// axis x-dir and y-dir\n\tpublic static final AXIS_RIGHT = \"{x:1,y:0}\";\n\tpublic static final AXIS_LEFT = \"{x:-1,y:0}\";\n\tpublic static final AXIS_DOWN = \"{x:0,y:1}\";\n\tpublic static final AXIS_UP = \"{x:0,y:-1}\";\n\tpublic static final AXIS_DOWN_RIGHT = \"{x:1,y:1}\";\n\tpublic static final AXIS_DOWN_LEFT = \"{x:-1,y:1}\";\n\tpublic static final AXIS_UP_RIGHT = \"{x:1,y:-1}\";\n\tpublic static final AXIS_UP_LEFT = \"{x:-1,y:-1}\";\n\tpublic static final AXIS_CENTER = \"{x:0,y:0}\";\n\t// public static final AXIS_RIGHT = {x: 1.0, y: 0.0};\n\t// public static final AXIS_LEFT = {x: -1.0, y: 0.0};\n\t// public static final AXIS_DOWN = {x: 0.0, y: 1.0};\n\t// public static final AXIS_UP = {x: 0.0, y: -1.0};\n\t// public static final AXIS_DOWN_RIGHT = {x: 1.0, y: 1.0};\n\t// public static final AXIS_DOWN_LEFT = {x: -1.0, y: 1.0};\n\t// public static final AXIS_UP_RIGHT = {x: 1.0, y: -1.0};\n\t// public static final AXIS_UP_LEFT = {x: -1.0, y: -1.0};\n\t// public static final AXIS_CENTER = {x: 0.0, y: 0.0};\n\t// axis description\n\tpublic static final AXIS_RIGHT_DISC = '→';\n\tpublic static final AXIS_LEFT_DISC = '←';\n\tpublic static final AXIS_DOWN_DISC = '↓';\n\tpublic static final AXIS_UP_DISC = '↑';\n\tpublic static final AXIS_DOWN_RIGHT_DISC = '↘';\n\tpublic static final AXIS_DOWN_LEFT_DISC = '↙';\n\tpublic static final AXIS_UP_RIGHT_DISC = '↗';\n\tpublic static final AXIS_UP_LEFT_DISC = '↖';\n\tpublic static final AXIS_CENTER_DISC = '×';\n\t// make it easier to get the description of the button\n\tpublic static final AXIS_MAP:Map<String, String> = [\n\t\tAXIS_RIGHT => AXIS_RIGHT_DISC,\n\t\tAXIS_LEFT => AXIS_LEFT_DISC,\n\t\tAXIS_DOWN => AXIS_DOWN_DISC,\n\t\tAXIS_UP => AXIS_UP_DISC,\n\t\tAXIS_DOWN_RIGHT => AXIS_DOWN_RIGHT_DISC,\n\t\tAXIS_DOWN_LEFT => AXIS_DOWN_LEFT_DISC,\n\t\tAXIS_UP_RIGHT => AXIS_UP_RIGHT_DISC,\n\t\tAXIS_UP_LEFT => AXIS_UP_LEFT_DISC,\n\t\tAXIS_CENTER => AXIS_CENTER_DISC,\n\t];\n\t// id of the button in the gamepad.button array\n\tpublic static final BUTTON_X = 0;\n\tpublic static final BUTTON_A = 1;\n\tpublic static final BUTTON_B = 2;\n\tpublic static final BUTTON_Y = 3;\n\tpublic static final BUTTON_LEFT_BOTTOM = 4;\n\tpublic static final BUTTON_RIGHT_BOTTOM = 5;\n\tpublic static final BUTTON_SELECT = 8;\n\tpublic static final BUTTON_START = 9;\n\t// descriptions in text about the button\n\tpublic static final BUTTON_X_DISC = 'X';\n\tpublic static final BUTTON_A_DISC = 'A';\n\tpublic static final BUTTON_B_DISC = 'B';\n\tpublic static final BUTTON_Y_DISC = 'Y';\n\tpublic static final BUTTON_LEFT_BOTTOM_DISC = 'Left Bottom';\n\tpublic static final BUTTON_RIGHT_BOTTOM_DISC = 'Right Bottom';\n\tpublic static final BUTTON_SELECT_DISC = 'Select';\n\tpublic static final BUTTON_START_DISC = 'Start';\n\t// make it easier to get the description of the button\n\tpublic static final BUTTON_MAP:Map<Int, String> = [\n\t\tBUTTON_X => BUTTON_X_DISC,\n\t\tBUTTON_A => BUTTON_A_DISC,\n\t\tBUTTON_B => BUTTON_B_DISC,\n\t\tBUTTON_Y => BUTTON_Y_DISC,\n\t\tBUTTON_LEFT_BOTTOM => BUTTON_LEFT_BOTTOM_DISC,\n\t\tBUTTON_RIGHT_BOTTOM => BUTTON_RIGHT_BOTTOM_DISC,\n\t\tBUTTON_SELECT => BUTTON_SELECT_DISC,\n\t\tBUTTON_START => BUTTON_START_DISC\n\t];\n\n\tpublic function new() {\n\t\t// trace('START :: CCGamepad');\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function(event) {\n\t\t\tconsole.log('${model.constants.App.NAME} Dom ready :: build: ${model.constants.App.getBuildDate()}');\n\t\t\tinit();\n\t\t});\n\t}\n\n\t// ____________________________________ public  ____________________________________\n\n\tpublic function setup() {\n\t\t// trace(AXIS_MAP.get(\"{x:1,y:0}\"));\n\n\t\t// for (key in AXIS_MAP.keys()) {\n\t\t// \ttrace(key, AXIS_MAP.get(key));\n\t\t// }\n\t\tinit();\n\t}\n\n\tpublic function onButton(func:Function, ?arr:Array<Dynamic>) {\n\t\tvar action:Action = new Action(func, arr);\n\t\t_options.onButton = action;\n\t}\n\n\tpublic function onButtonOnce(id:Int, func:Function, ?arr:Array<Dynamic>) {\n\t\t// trace(BUTTON_MAP.get(id));\n\t\tvar action:Action = new Action(func, arr, true);\n\t\taction.btnid(id);\n\t\t_options.onButton = action;\n\t}\n\n\tpublic function onAxis(func:Function, ?arr:Array<Dynamic>) {\n\t\t_options.onAxis = func;\n\t\t_options.onAxisParams = arr;\n\t}\n\n\tpublic function onSelect(func:Function, ?arr:Array<Dynamic>) {\n\t\tvar action:Action = new Action(func, arr);\n\t\t_options.onSelect = action;\n\t}\n\n\tpublic function onSelectOnce(func:Function, ?arr:Array<Dynamic>) {\n\t\tvar action:Action = new Action(func, arr, true);\n\t\t_options.onSelect = action;\n\t}\n\n\tpublic function onLeftBottomOnce(func:Function, ?arr:Array<Dynamic>) {\n\t\tvar action:Action = new Action(func, arr, true);\n\t\t_options.onLeftBottom = action;\n\t}\n\n\tpublic function onRightBottomOnce(func:Function, ?arr:Array<Dynamic>) {\n\t\tvar action:Action = new Action(func, arr, true);\n\t\t_options.onRightBottom = action;\n\t}\n\n\tpublic function onStart(func:Function, ?arr:Array<Dynamic>) {\n\t\tvar action:Action = new Action(func, arr);\n\t\t_options.onStart = action;\n\t}\n\n\tpublic function onStartOnce(func:Function, ?arr:Array<Dynamic>) {\n\t\tvar action:Action = new Action(func, arr, true);\n\t\t_options.onStart = action;\n\t}\n\n\t// ____________________________________ init ____________________________________\n\n\tfunction init() {\n\t\tsetupWarning();\n\t\tsetupListeners();\n\t}\n\n\t// ____________________________________ setup ____________________________________\n\n\tfunction setupWarning() {\n\t\tvar containerDiv = document.createDivElement();\n\t\tcontainerDiv.id = 'gamepad-warning';\n\t\tcontainerDiv.setAttribute('style',\n\t\t\t\"background-color: rgba(0, 0, 0, 0.3);width: 100vw;height: 100vh;display: flex;justify-content: center;align-items: center;overflow-x: hidden;overflow-y: auto;z-index: 99999999999;position: fixed;top: 0;left: 0;\");\n\t\tvar div = document.createDivElement();\n\t\tdiv.className = \"wrapper\";\n\t\tdiv.setAttribute('style',\n\t\t\t'background-color: white;width: 300px;text-align: center;border: 1px solid rgba(0, 0, 0, .2);border-radius: .3rem;padding: 1rem 1rem;');\n\t\tdiv.innerHTML = '<i class=\"fa fa-gamepad fa-5x\"></i><h2>No gamepad detected</h2><p>If you have one, make sure it\\'s plugged in / paired, and press buttons to wake it up.</p>';\n\t\tcontainerDiv.appendChild(div);\n\t\tdocument.body.appendChild(containerDiv);\n\t}\n\n\tfunction setupListeners() {\n\t\twindow.addEventListener(\"gamepadconnected\", onGamepadConnectedHandler);\n\t\twindow.addEventListener(\"gamepaddisconnected\", onGamepadDisconnectedHandler);\n\t\t// might only work in Firefox\n\t\twindow.addEventListener(\"gamepadbuttondown\", onGamepadButtonDownHandler);\n\t\twindow.addEventListener(\"gamepadbuttonup\", onGamepadButtonUpHandler);\n\t\twindow.addEventListener(\"gamepadaxismove\", onGamepadAxisMoveHandler);\n\t}\n\n\tfunction setupInterface() {\n\t\tvar gamepad = navigator.getGamepads()[0];\n\n\t\tvar d = document.createDivElement();\n\t\td.className = 'container';\n\t\td.setAttribute(\"id\", \"controller\" + gamepad.index);\n\n\t\tvar t = document.createElement(\"h1\");\n\t\tt.appendChild(document.createTextNode(\"gamepad: \" + gamepad.id));\n\t\td.appendChild(t);\n\n\t\tvar t = document.createDivElement();\n\t\tt.id = \"name-button\";\n\t\td.appendChild(t);\n\n\t\tbtnNameField = t;\n\n\t\tvar b = document.createDivElement();\n\t\tb.className = \"buttons\";\n\t\tfor (i in 0...gamepad.buttons.length) {\n\t\t\tvar e = document.createSpanElement();\n\t\t\te.className = \"button\";\n\t\t\t// e.id = \"b\" + i;\n\t\t\te.innerHTML = Std.string(i);\n\t\t\tb.appendChild(e);\n\n\t\t\tbtnMap.set(i, e);\n\t\t}\n\t\td.appendChild(b);\n\n\t\tvar a = document.createDivElement();\n\t\ta.className = \"axes\";\n\t\tfor (i in 0...gamepad.axes.length) {\n\t\t\tvar p = document.createProgressElement();\n\t\t\tp.className = \"axis\";\n\t\t\t// p.id = \"a\" + i;\n\t\t\tp.setAttribute(\"max\", \"2\");\n\t\t\tp.setAttribute(\"value\", \"1\");\n\t\t\tp.innerHTML = Std.string(i);\n\t\t\ta.appendChild(p);\n\n\t\t\taxisMap.set(i, p);\n\t\t}\n\t\td.appendChild(a);\n\n\t\tvar pre = document.createDivElement();\n\t\tpre.innerText = '- index: ${gamepad.index}\\n- id: \"${gamepad.id}\"\\n- timestamp: ${gamepad.timestamp}\\n- mapping: ${gamepad.mapping}\\n- connected: ${gamepad.connected}\\n- buttons: ${gamepad.buttons.length}\\n- axes: ${gamepad.axes.length}';\n\n\t\td.appendChild(pre);\n\n\t\tvar warningDiv = document.getElementById(\"gamepad-warning\");\n\t\tif (warningDiv != null) {\n\t\t\twarningDiv.style.display = \"none\";\n\t\t}\n\n\t\tdocument.body.appendChild(d);\n\t}\n\n\t// ____________________________________ handlers ____________________________________\n\tfunction onGamepadConnectedHandler(e:GamepadEvent) {\n\t\t// Gamepad connected\n\t\tconsole.log(\"Gamepad connected\", e.gamepad);\n\n\t\t// setupControllerValues();\n\t\tsetupInterface();\n\n\t\tgameLoop();\n\t\t// timeoutVariable = window.setInterval(gameLoop, 500);\n\t}\n\n\t// var timeoutVariable:Int;\n\n\tfunction onGamepadDisconnectedHandler(e:GamepadEvent) {\n\t\t// Gamepad disconnected\n\t\tconsole.log(\"Gamepad disconnected\", e.gamepad);\n\t\t// removegamepad(e.gamepad);\n\t\twindow.cancelAnimationFrame(start);\n\t\t// window.clearTimeout(timeoutVariable);\n\t}\n\n\tfunction onGamepadButtonDownHandler(e) {\n\t\t// Gamepad button down\n\t\tconsole.log(\"Gamepad button down\", e.button, e.gamepad);\n\t}\n\n\tfunction onGamepadButtonUpHandler(e) {\n\t\t// Gamepad button up\n\t\tconsole.log(\"Gamepad button up\", e.button, e.gamepad);\n\t}\n\n\tfunction onGamepadAxisMoveHandler(e) {\n\t\t// Gamepad axis move\n\t\tconsole.log(\"Gamepad axis move\", e.button, e.gamepad);\n\t}\n\n\t// ____________________________________ gameLoop____________________________________\n\tvar previousButtonID:Int = null;\n\n\tfunction gameLoop(?value) {\n\t\tvar gamepad = navigator.getGamepads()[0];\n\t\tfor (el in btnMap) {\n\t\t\tel.classList.remove('pressed');\n\t\t}\n\n\t\t// reset previous value if button is released\n\t\tif (previousButtonID != null && !gamepad.buttons[previousButtonID].pressed) {\n\t\t\tpreviousButtonID = null;\n\t\t}\n\n\t\tfor (i in 0...gamepad.buttons.length) {\n\t\t\tvar currentButton:GamepadButton = gamepad.buttons[i];\n\t\t\t// console.log(currentButton);\n\n\t\t\tif (currentButton.pressed) {\n\t\t\t\tvar el = btnMap.get(i);\n\t\t\t\tel.classList.add('pressed');\n\t\t\t\t// show \"description\" of button\n\t\t\t\tbtnNameField.innerText = BUTTON_MAP.get(i);\n\t\t\t\tswitch (i) {\n\t\t\t\t\tcase BUTTON_SELECT:\n\t\t\t\t\t\tif (_options.onSelect != null) {\n\t\t\t\t\t\t\tvar _func = _options.onSelect.func;\n\t\t\t\t\t\t\tvar _arr = (_options.onSelect.arr != null) ? _options.onSelect.arr : [gamepad.timestamp];\n\t\t\t\t\t\t\tif (_options.onSelect.isOnce == true && previousButtonID != i) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t} else if (_options.onSelect.isOnce == false) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tcase BUTTON_START:\n\t\t\t\t\t\tif (_options.onStart != null) {\n\t\t\t\t\t\t\tvar _func = _options.onStart.func;\n\t\t\t\t\t\t\tvar _arr = (_options.onStart.arr != null) ? _options.onStart.arr : [gamepad.timestamp];\n\t\t\t\t\t\t\tif (_options.onStart.isOnce == true && previousButtonID != i) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t} else if (_options.onStart.isOnce == false) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tcase BUTTON_RIGHT_BOTTOM:\n\t\t\t\t\t\tif (_options.onRightBottom != null) {\n\t\t\t\t\t\t\tvar _func = _options.onRightBottom.func;\n\t\t\t\t\t\t\tvar _arr = (_options.onRightBottom.arr != null) ? _options.onRightBottom.arr : [gamepad.timestamp];\n\t\t\t\t\t\t\tif (_options.onRightBottom.isOnce == true && previousButtonID != i) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t} else if (_options.onRightBottom.isOnce == false) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tcase BUTTON_LEFT_BOTTOM:\n\t\t\t\t\t\tif (_options.onLeftBottom != null) {\n\t\t\t\t\t\t\tvar _func = _options.onLeftBottom.func;\n\t\t\t\t\t\t\tvar _arr = (_options.onLeftBottom.arr != null) ? _options.onLeftBottom.arr : [gamepad.timestamp];\n\t\t\t\t\t\t\tif (_options.onLeftBottom.isOnce == true && previousButtonID != i) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t} else if (_options.onLeftBottom.isOnce == false) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (_options.onButton != null) {\n\t\t\t\t\t\t\tvar _func = _options.onButton.func;\n\t\t\t\t\t\t\tvar _arr = (_options.onButton.arr != null) ? _options.onButton.arr : [BUTTON_MAP.get(i)];\n\n\t\t\t\t\t\t\t// console.log(_options.onButton.id == i);\n\t\t\t\t\t\t\t// if (_options.onButton.isOnce == true && previousButtonID != i && _options.onButton.id == i) {\n\t\t\t\t\t\t\t// \tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t// } else if (_options.onButton.isOnce == false) {\n\t\t\t\t\t\t\t// \tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tif (previousButtonID != i && _options.onButton.id == i) {\n\t\t\t\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpreviousButtonID = i;\n\t\t\t}\n\t\t}\n\n\t\tvar axes = document.getElementsByClassName(\"axis\");\n\t\tfor (i in 0...gamepad.axes.length) {\n\t\t\tvar a = axes[i];\n\t\t\t// a.innerHTML = i + \": \" + Syntax.code(\"(controller.axes[i]).toFixed(4)\");\n\t\t\ta.innerHTML = i + \": \" + gamepad.axes[i];\n\t\t\ta.setAttribute(\"value\", Std.string(gamepad.axes[i] + 1));\n\n\t\t\t// console.log(gamepad.axes[i]);\n\t\t\tvar joystickX = applyDeadzone(gamepad.axes[gamepad.axes.length - 2], 0.25);\n\t\t\tvar joystickY = applyDeadzone(gamepad.axes[gamepad.axes.length - 1], 0.25);\n\n\t\t\tvar joystickStr = '{x:${joystickX},y:${joystickY}}';\n\t\t\tvar joystickObj:JoystickObj = {\n\t\t\t\tx: joystickX,\n\t\t\t\ty: joystickY,\n\t\t\t\tdesc: AXIS_MAP.get(joystickStr)\n\t\t\t}\n\n\t\t\t// trace(joystickObj);\n\t\t\t// trace(joystickStr);\n\t\t\t// trace(AXIS_MAP.get(joystickStr));\n\n\t\t\tif (joystickX == 0 && joystickY == 0) {\n\t\t\t\t// what? don't use the joystick\n\t\t\t} else {\n\t\t\t\tbtnNameField.innerText = AXIS_MAP.get(joystickStr);\n\t\t\t}\n\n\t\t\t// if (joystickX == 1)\n\n\t\t\t// \tbtnNameField.innerText = '→';\n\t\t\t// if (joystickX == -1)\n\t\t\t// \tbtnNameField.innerText = '←';\n\t\t\t// if (joystickY == 1)\n\t\t\t// \tbtnNameField.innerText = '↓';\n\t\t\t// if (joystickY == -1)\n\t\t\t// \tbtnNameField.innerText = '↑';\n\t\t\t// if (joystickX == 1 && joystickY == 1)\n\t\t\t// \tbtnNameField.innerText = '↘';\n\t\t\t// if (joystickX == 1 && joystickY == -1)\n\t\t\t// \tbtnNameField.innerText = '↗';\n\t\t\t// if (joystickX == -1 && joystickY == 1)\n\t\t\t// \tbtnNameField.innerText = '↙';\n\t\t\t// if (joystickX == -1 && joystickY == -1)\n\t\t\t// \tbtnNameField.innerText = '↖';\n\t\t\t// // if (joystickX == 0 && joystickY == 0)\n\t\t\t// \tbtnNameField.innerText = '×';\n\n\t\t\t// trace('public static final AXIS_OBJ = ${btnNameField.innerText}; // ${joystickObj}');\n\n\t\t\t// if (joystickZ >= 1 || joystickZ <= -1) {\n\t\t\t// \tbtnNameField.innerText = 'migical';\n\t\t\t// }\n\t\t\tif (_options.onAxis != null) {\n\t\t\t\tif (joystickX != 0 || joystickY != 0) {\n\t\t\t\t\tvar _func = _options.onAxis;\n\t\t\t\t\tvar _arr = (_options.onAxisParams != null) ? _options.onAxisParams : [joystickObj];\n\t\t\t\t\tReflect.callMethod(_func, _func, _arr);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tstart = window.requestAnimationFrame(gameLoop);\n\t}\n\n\t/**\n\t * var joystickX = applyDeadzone(gamepad.axes[0], 0.25);\n\t * @param number\n\t * @param threshold\n\t */\n\tfunction applyDeadzone(number:Float, threshold:Float) {\n\t\tvar percentage = (Math.abs(number) - threshold) / (1 - threshold);\n\t\tif (percentage < 0)\n\t\t\tpercentage = 0;\n\t\treturn percentage * (number > 0 ? 1 : -1);\n\t}\n\n\tstatic public function main() {\n\t\tvar app = new CCGamepad();\n\t}\n}\n\ntypedef GamePadObject = {\n\t@:optional var _id:String;\n\tvar gamepad:Gamepad;\n\tvar alias:String;\n\tvar buttonMap:Map<Int, String>;\n}\n\ntypedef JoystickObj = {\n\t@:optional var desc:String;\n\tvar x:Float;\n\tvar y:Float;\n}\n\ntypedef SettingsObject = {\n\t@:optional var _id:String;\n\t// select\n\t// @:optional var onSelect:Function;\n\t// @:optional var onSelectParams:Array<Dynamic>;\n\t// @:optional var onSelectOnce:Bool;\n\t@:optional var onSelect:Action;\n\t// start\n\t@:optional var onStart:Action;\n\t// left bottom\n\t@:optional var onLeftBottom:Action;\n\t// right bottom\n\t@:optional var onRightBottom:Action;\n\t// buttons\n\t@:optional var onButton:Action;\n\t// Axis\n\t@:optional var onAxis:Function;\n\t@:optional var onAxisParams:Array<Dynamic>;\n}\n\nclass Action {\n\tpublic var func:Function;\n\tpublic var arr:Array<Dynamic>;\n\tpublic var id:Int;\n\tpublic var isOnce:Bool = false; // default trigger often 60fps\n\n\tpublic function new(func:Function, ?arr:Array<Dynamic>, ?isOnce = false) {\n\t\tthis.func = func;\n\t\tthis.arr = arr;\n\t\tthis.isOnce = isOnce;\n\t}\n\n\tpublic function btnid(id) {\n\t\tthis.id = id;\n\t}\n}\n","package model.constants;\n\nimport haxe.macro.Context;\n\nclass App {\n\tpublic static var NAME:String = \"[cc-gamepad]\";\n\n\tpublic static inline macro function getBuildDate() {\n\t\t#if !display\n\t\tvar date = Date.now().toString();\n\t\treturn macro $v{date};\n\t\t#else\n\t\tvar date = Date.now().toString();\n\t\treturn macro $v{date};\n\t\t#end\n\t}\n}\n","import js.html.NodeList;\nimport js.html.Element;\nimport CCGamepad.JoystickObj;\nimport js.Browser.*;\nimport js.html.GamepadButton;\n\nusing StringTools;\n\nclass NavigationGamepad {\n\tvar current = 0;\n\tvar focusable:NodeList;\n\n\tpublic function new() {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function(event) {\n\t\t\tconsole.log('${model.constants.App.NAME} NavigationGamepad :: build: ${model.constants.App.getBuildDate()}');\n\t\t\tinit();\n\t\t});\n\t}\n\n\tfunction init() {\n\t\tfocusable = document.querySelectorAll('button, a[href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n\n\t\tconsole.log(focusable);\n\n\t\tvar gamePad = new SNES();\n\t\tgamePad.setup();\n\t\t// gamePad.onSelectOnce(onSelectHandler); // specific type, just press once\n\t\tgamePad.onStartOnce(onStartHandler); // specific type, just press once\n\t\tgamePad.onLeftBottomOnce(onLeftBottomHandler); // specific type, just press once\n\t\tgamePad.onRightBottomOnce(onRightBottomHandler); // specific type, just press once\n\t\t// gamePad.onButton(onButton); // all other button, just fire as much as possible\n\t\tgamePad.onButtonOnce(CCGamepad.BUTTON_B, onButtonB); // all other button, just fire as much as possible\n\t\t// gamePad.onAxis(onAxis); // all other button, just fire as much as possible\n\t}\n\n\t// ____________________________________ Handlers ____________________________________\n\n\tfunction onButtonB(e) {\n\t\tconsole.log('onSelectHandler: ', e);\n\t\tclickItem(current);\n\t}\n\n\tfunction onStartHandler(e) {\n\t\tconsole.log('onStartHandler: ', e);\n\t\tclickItem(current);\n\t}\n\n\tfunction onLeftBottomHandler(e) {\n\t\tconsole.log('onLeftBottomHandler: ', e);\n\t\tprevItem(current);\n\t}\n\n\tfunction onRightBottomHandler(e) {\n\t\tconsole.log('onRightBottomHandler: ', e);\n\t\tnextItem(current);\n\t}\n\n\t// ____________________________________ page controle ____________________________________\n\n\tfunction nextItem(index) {\n\t\tindex++;\n\t\tcurrent = index % focusable.length;\n\n\t\tif (current >= focusable.length)\n\t\t\tcurrent = 0;\n\n\t\tcast(focusable[current], Element).focus();\n\t\tconsole.log(cast(focusable[current], Element).textContent);\n\t}\n\n\tfunction prevItem(index) {\n\t\tindex--;\n\t\tcurrent = index % focusable.length;\n\n\t\tif (current <= 0)\n\t\t\tcurrent = focusable.length;\n\n\t\tcast(focusable[current], Element).focus();\n\t\tconsole.log(cast(focusable[current], Element).textContent);\n\t}\n\n\tfunction clickItem(index) {\n\t\tif (cast(focusable[index], Element) != null) {\n\t\t\tcast(focusable[index], Element).click();\n\t\t}\n\t}\n\n\tstatic public function main() {\n\t\tvar app = new NavigationGamepad();\n\t}\n}\n","import js.Browser.*;\n\nclass SNES extends CCGamepad {\n\tpublic static final BUTTON_X = 0;\n\tpublic static final BUTTON_A = 1;\n\tpublic static final BUTTON_B = 2;\n\tpublic static final BUTTON_Y = 3;\n\tpublic static final BUTTON_LEFT_BOTTOM = 4;\n\tpublic static final BUTTON_RIGHT_BOTTOM = 5;\n\tpublic static final BUTTON_SELECT = 8;\n\tpublic static final BUTTON_START = 9;\n\n\tpublic function new() {\n\t\tconsole.log('${model.constants.App.NAME} SNES :: build: ${model.constants.App.getBuildDate()}');\n\t\tsuper();\n\t}\n\n\t// static public function main() {\n\t// \tvar app = new SNES();\n\t// }\n}\n","/*\n * Copyright (C)2005-2019 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\nimport js.Boot;\nimport js.Syntax;\n\n@:keepInit\n@:coreApi class Std {\n\tpublic static inline function is(v:Dynamic, t:Dynamic):Bool {\n\t\treturn isOfType(v, t);\n\t}\n\n\tpublic static inline function isOfType(v:Dynamic, t:Dynamic):Bool {\n\t\treturn @:privateAccess js.Boot.__instanceof(v, t);\n\t}\n\n\tpublic static inline function downcast<T:{}, S:T>(value:T, c:Class<S>):S@:privateAccess {\n\t\treturn if (js.Boot.__downcastCheck(value, c)) cast value else null;\n\t}\n\n\t@:deprecated('Std.instance() is deprecated. Use Std.downcast() instead.')\n\tpublic static inline function instance<T:{}, S:T>(value:T, c:Class<S>):S {\n\t\treturn downcast(value, c);\n\t}\n\n\t@:pure\n\tpublic static function string(s:Dynamic):String {\n\t\treturn @:privateAccess js.Boot.__string_rec(s, \"\");\n\t}\n\n\tpublic static inline function int(x:Float):Int {\n\t\treturn (cast x) | 0;\n\t}\n\n\t@:pure\n\tpublic static function parseInt(x:String):Null<Int> {\n\t\tif(x != null) {\n\t\t\tfor(i in 0...x.length) {\n\t\t\t\tvar c = StringTools.fastCodeAt(x, i);\n\t\t\t\tif(c <= 8 || (c >= 14 && c != ' '.code && c != '-'.code)) {\n\t\t\t\t\tvar nc = StringTools.fastCodeAt(x, i + 1);\n\t\t\t\t\tvar v = js.Lib.parseInt(x, (nc == \"x\".code || nc == \"X\".code) ? 16 : 10);\n\t\t\t\t\treturn Math.isNaN(v) ? null : cast v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic static inline function parseFloat(x:String):Float {\n\t\treturn js.Syntax.code(\"parseFloat({0})\", x);\n\t}\n\n\tpublic static function random(x:Int):Int {\n\t\treturn x <= 0 ? 0 : Math.floor(Math.random() * x);\n\t}\n\n\tstatic function __init__():Void\n\t\tuntyped {\n\t\t\t__feature__(\"js.Boot.getClass\", String.prototype.__class__ = __feature__(\"Type.resolveClass\", $hxClasses[\"String\"] = String, String));\n\t\t\t__feature__(\"js.Boot.isClass\", String.__name__ = __feature__(\"Type.getClassName\", \"String\", true));\n\t\t\t__feature__(\"Type.resolveClass\", $hxClasses[\"Array\"] = Array);\n\t\t\t__feature__(\"js.Boot.isClass\", Array.__name__ = __feature__(\"Type.getClassName\", \"Array\", true));\n\t\t\t__feature__(\"Date.*\", {\n\t\t\t\t__feature__(\"js.Boot.getClass\",\n\t\t\t\t\tjs.Syntax.code('Date').prototype.__class__ = __feature__(\"Type.resolveClass\", $hxClasses[\"Date\"] = js.Syntax.code('Date'), js.Syntax.code('Date')));\n\t\t\t\t__feature__(\"js.Boot.isClass\", js.Syntax.code('Date').__name__ = \"Date\");\n\t\t\t});\n\t\t\t__feature__(\"Int.*\", js.Syntax.code('var Int = { };'));\n\t\t\t__feature__(\"Dynamic.*\", js.Syntax.code('var Dynamic = { };'));\n\t\t\t__feature__(\"Float.*\", js.Syntax.code('var Float = Number'));\n\t\t\t__feature__(\"Bool.*\", js.Syntax.code('var Bool = Boolean'));\n\t\t\t__feature__(\"Class.*\", js.Syntax.code('var Class = { };'));\n\t\t\t__feature__(\"Enum.*\", js.Syntax.code('var Enum = { };'));\n\t\t\t#if (js_es < 5)\n\t\t\t__feature__(\"Array.map\", if (Array.prototype.map == null) Array.prototype.map = function(f) {\n\t\t\t\tvar a = [];\n\t\t\t\tfor (i in 0...__this__.length)\n\t\t\t\t\ta[i] = f(__this__[i]);\n\t\t\t\treturn a;\n\t\t\t});\n\t\t\t__feature__(\"Array.filter\", if (Array.prototype.filter == null) Array.prototype.filter = function(f) {\n\t\t\t\tvar a = [];\n\t\t\t\tfor (i in 0...__this__.length) {\n\t\t\t\t\tvar e = __this__[i];\n\t\t\t\t\tif (f(e))\n\t\t\t\t\t\ta.push(e);\n\t\t\t\t}\n\t\t\t\treturn a;\n\t\t\t});\n\t\t\t#end\n\t\t}\n}\n","package haxe;\n\nimport js.lib.Error;\n\n@:coreApi\nclass Exception extends NativeException {\n\tpublic var message(get,never):String;\n\tpublic var stack(get,never):CallStack;\n\tpublic var previous(get,never):Null<Exception>;\n\tpublic var native(get,never):Any;\n\n\t@:ifFeature(\"haxe.Exception.get_stack\")\n\t@:noCompletion var __skipStack:Int;\n\t@:noCompletion var __exceptionStack(get,set):Null<CallStack>;\n\t@:noCompletion var __nativeException:Any;\n\t@:noCompletion var __previousException:Null<Exception>;\n\n\tstatic function caught(value:Any):Exception {\n\t\tif(Std.isOfType(value, Exception)) {\n\t\t\treturn value;\n\t\t} else if(Std.isOfType(value, Error)) {\n\t\t\treturn new Exception((cast value:Error).message, null, value);\n\t\t} else {\n\t\t\treturn new ValueException(value, null, value);\n\t\t}\n\t}\n\n\tstatic function thrown(value:Any):Any {\n\t\tif(Std.isOfType(value, Exception)) {\n\t\t\treturn (value:Exception).native;\n\t\t} else if(Std.isOfType(value, Error)) {\n\t\t\treturn value;\n\t\t} else {\n\t\t\tvar e = new ValueException(value);\n\t\t\tuntyped __feature__(\"haxe.Exception.get_stack\", e.__shiftStack());\n\t\t\treturn e;\n\t\t}\n\t}\n\n\tpublic function new(message:String, ?previous:Exception, ?native:Any) {\n\t\tsuper(message);\n\t\t(cast this).message = message;\n\t\t__previousException = previous;\n\t\t__nativeException = native != null ? native : this;\n\t\tuntyped __feature__('haxe.Exception.stack', {\n\t\t\t__skipStack = 0;\n\t\t\tvar old = js.Syntax.code('Error.prepareStackTrace');\n\t\t\tjs.Syntax.code('Error.prepareStackTrace = function(e) { return e.stack; }');\n\t\t\tif(Std.isOfType(native, Error)) {\n\t\t\t\t(cast this).stack = native.stack;\n\t\t\t} else {\n\t\t\t\tvar e:Error = null;\n\t\t\t\tif ((cast Error).captureStackTrace) {\n\t\t\t\t\t(cast Error).captureStackTrace(this, Exception);\n\t\t\t\t\te = cast this;\n\t\t\t\t} else {\n\t\t\t\t\te = new Error();\n\t\t\t\t\t//Internet Explorer provides call stack only if error was thrown\n\t\t\t\t\tif(js.Syntax.typeof(e.stack) == \"undefined\") {\n\t\t\t\t\t\tjs.Syntax.code('try { throw {0}; } catch(_) {}', e);\n\t\t\t\t\t\t__skipStack++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t(cast this).stack = e.stack;\n\t\t\t}\n\t\t\tjs.Syntax.code('Error.prepareStackTrace = {0}', old);\n\t\t});\n\t}\n\n\tfunction unwrap():Any {\n\t\treturn __nativeException;\n\t}\n\n\tpublic function toString():String {\n\t\treturn message;\n\t}\n\n\tpublic function details():String {\n\t\treturn inline CallStack.exceptionToString(this);\n\t}\n\n\t@:noCompletion\n\t@:ifFeature(\"haxe.Exception.get_stack\")\n\tinline function __shiftStack():Void {\n\t\t__skipStack++;\n\t}\n\n\tfunction get_message():String {\n\t\treturn (cast this:Error).message;\n\t}\n\n\tfunction get_previous():Null<Exception> {\n\t\treturn __previousException;\n\t}\n\n\tfinal function get_native():Any {\n\t\treturn __nativeException;\n\t}\n\n\tfunction get_stack():CallStack {\n\t\treturn switch __exceptionStack {\n\t\t\tcase null:\n\t\t\t\t__exceptionStack = NativeStackTrace.toHaxe(NativeStackTrace.normalize((cast this).stack), __skipStack);\n\t\t\tcase s: s;\n\t\t}\n\t}\n\n\t@:noCompletion\n\tfunction setProperty(name:String, value:Any):Void {\n\t\ttry {\n\t\t\tjs.lib.Object.defineProperty(this, name, {value:value});\n\t\t} catch(e:Exception) {\n\t\t\tjs.Syntax.code('{0}[{1}] = {2}', this, name, value);\n\t\t}\n\t}\n\n\t@:noCompletion\n\tinline function get___exceptionStack():CallStack {\n\t\treturn (cast this).__exceptionStack;\n\t}\n\n\t@:noCompletion\n\tinline function set___exceptionStack(value:CallStack):CallStack {\n\t\tsetProperty('__exceptionStack', value);\n\t\treturn value;\n\t}\n\n\t@:noCompletion\n\tinline function get___skipStack():Int {\n\t\treturn (cast this).__skipStack;\n\t}\n\n\t@:noCompletion\n\tinline function set___skipStack(value:Int):Int {\n\t\tsetProperty('__skipStack', value);\n\t\treturn value;\n\t}\n\n\t@:noCompletion\n\tinline function get___nativeException():Any {\n\t\treturn (cast this).__nativeException;\n\t}\n\n\t@:noCompletion\n\tinline function set___nativeException(value:Any):Any {\n\t\tsetProperty('__nativeException', value);\n\t\treturn value;\n\t}\n\n\t@:noCompletion\n\tinline function get___previousException():Null<Exception> {\n\t\treturn (cast this).__previousException;\n\t}\n\n\t@:noCompletion\n\tinline function set___previousException(value:Null<Exception>):Null<Exception> {\n\t\tsetProperty('__previousException', value);\n\t\treturn value;\n\t}\n}\n\n@:dox(hide)\n@:noCompletion\n@:native('Error')\nprivate extern class NativeException {\n\t// private var message:String; //redefined in haxe.Exception\n\t// private var stack(default, null):String; //redefined in haxe.Exception\n\n\tfunction new(?message:String);\n}\n","package haxe;\n\n/**\n\tAn exception containing arbitrary value.\n\n\tThis class is automatically used for throwing values, which don't extend `haxe.Exception`\n\tor native exception type.\n\tFor example:\n\t```haxe\n\tthrow \"Terrible error\";\n\t```\n\twill be compiled to\n\t```haxe\n\tthrow new ValueException(\"Terrible error\");\n\t```\n**/\nclass ValueException extends Exception {\n\t/**\n\t\tThrown value.\n\t**/\n\tpublic var value(default,null):Any;\n\n\tpublic function new(value:Any, ?previous:Exception, ?native:Any):Void {\n\t\tsuper(#if js js.Syntax.code('String({0})', value) #else Std.string(value) #end, previous, native);\n\t\tthis.value = value;\n\t}\n\n\t/**\n\t\tExtract an originally thrown value.\n\n\t\tThis method must return the same value on subsequent calls.\n\t\tUsed internally for catching non-native exceptions.\n\t\tDo _not_ override unless you know what you are doing.\n\t**/\n\toverride function unwrap():Any {\n\t\treturn value;\n\t}\n}","/*\n * Copyright (C)2005-2019 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage haxe.ds;\n\n@:coreApi class IntMap<T> implements haxe.Constraints.IMap<Int, T> {\n\tprivate var h:Dynamic;\n\n\tpublic inline function new():Void {\n\t\th = {};\n\t}\n\n\tpublic inline function set(key:Int, value:T):Void {\n\t\th[key] = value;\n\t}\n\n\tpublic inline function get(key:Int):Null<T> {\n\t\treturn h[key];\n\t}\n\n\tpublic inline function exists(key:Int):Bool {\n\t\treturn (cast h).hasOwnProperty(key);\n\t}\n\n\tpublic function remove(key:Int):Bool {\n\t\tif (!(cast h).hasOwnProperty(key))\n\t\t\treturn false;\n\t\tjs.Syntax.delete(h, key);\n\t\treturn true;\n\t}\n\n\tpublic function keys():Iterator<Int> {\n\t\tvar a = [];\n\t\tjs.Syntax.code(\"for( var key in {0} ) if({0}.hasOwnProperty(key)) {1}.push(key | 0)\", h, a);\n\t\treturn a.iterator();\n\t}\n\n\tpublic function iterator():Iterator<T> {\n\t\treturn untyped {\n\t\t\tref: h,\n\t\t\tit: keys(),\n\t\t\thasNext: function() {\n\t\t\t\treturn __this__.it.hasNext();\n\t\t\t},\n\t\t\tnext: function() {\n\t\t\t\tvar i = __this__.it.next();\n\t\t\t\treturn __this__.ref[i];\n\t\t\t}\n\t\t};\n\t}\n\n\t@:runtime public inline function keyValueIterator():KeyValueIterator<Int, T> {\n\t\treturn new haxe.iterators.MapKeyValueIterator(this);\n\t}\n\n\tpublic function copy():IntMap<T> {\n\t\tvar copied = new IntMap();\n\t\tfor (key in keys())\n\t\t\tcopied.set(key, get(key));\n\t\treturn copied;\n\t}\n\n\tpublic function toString():String {\n\t\tvar s = new StringBuf();\n\t\ts.add(\"{\");\n\t\tvar it = keys();\n\t\tfor (i in it) {\n\t\t\ts.add(i);\n\t\t\ts.add(\" => \");\n\t\t\ts.add(Std.string(get(i)));\n\t\t\tif (it.hasNext())\n\t\t\t\ts.add(\", \");\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n\n\tpublic inline function clear():Void {\n\t\th = {};\n\t}\n}\n","/*\n * Copyright (C)2005-2019 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage haxe.ds;\n\nimport js.lib.Object;\nimport haxe.Constraints.IMap;\nimport haxe.DynamicAccess;\n\n#if (js_es >= 5)\n@:coreApi class StringMap<T> implements IMap<String, T> {\n\tvar h:Dynamic;\n\n\tpublic inline function new() {\n\t\th = Object.create(null);\n\t}\n\n\tpublic inline function exists(key:String):Bool {\n\t\treturn Object.prototype.hasOwnProperty.call(h, key);\n\t}\n\n\tpublic inline function get(key:String):Null<T> {\n\t\treturn h[cast key];\n\t}\n\n\tpublic inline function set(key:String, value:T):Void {\n\t\th[cast key] = value;\n\t}\n\n\tpublic inline function remove(key:String):Bool {\n\t\treturn if (exists(key)) {\n\t\t\tjs.Syntax.delete(h, key); true;\n\t\t} else {\n\t\t\tfalse;\n\t\t}\n\t}\n\n\tpublic inline function keys():Iterator<String> {\n\t\treturn keysIterator(h);\n\t}\n\n\tpublic inline function iterator():Iterator<T> {\n\t\treturn valueIterator(h);\n\t}\n\n\tpublic inline function keyValueIterator():KeyValueIterator<String, T> {\n\t\treturn kvIterator(h);\n\t}\n\n\tpublic inline function copy():StringMap<T> {\n\t\treturn createCopy(h);\n\t}\n\n\tpublic inline function clear():Void {\n\t\th = Object.create(null);\n\t}\n\n\tpublic inline function toString():String {\n\t\treturn stringify(h);\n\t}\n\n\t// impl\n\n\tstatic function keysIterator(h:Dynamic):Iterator<String> {\n\t\tvar keys = Object.keys(h), len = keys.length, idx = 0;\n\t\treturn {\n\t\t\thasNext: () -> idx < len,\n\t\t\tnext: () -> keys[idx++]\n\t\t};\n\t}\n\n\tstatic function valueIterator<T>(h:Dynamic):Iterator<T> {\n\t\tvar keys = Object.keys(h), len = keys.length, idx = 0;\n\t\treturn {\n\t\t\thasNext: () -> idx < len,\n\t\t\tnext: () -> h[cast keys[idx++]]\n\t\t};\n\t}\n\n\tstatic function kvIterator<T>(h:Dynamic):KeyValueIterator<String, T> {\n\t\tvar keys = Object.keys(h), len = keys.length, idx = 0;\n\t\treturn {\n\t\t\thasNext: () -> idx < len,\n\t\t\tnext: () -> {var k = keys[idx++]; {key: k, value: h[cast k]}}\n\t\t};\n\t}\n\n\tstatic function createCopy<T>(h:Dynamic):StringMap<T> {\n\t\tvar copy = new StringMap();\n\t\tjs.Syntax.code(\"for (var key in {0}) {1}[key] = {0}[key]\", h, copy.h);\n\t\treturn copy;\n\t}\n\n\t@:analyzer(no_optimize)\n\tstatic function stringify(h:Dynamic):String {\n\t\tvar s = \"{\", first = true;\n\t\tjs.Syntax.code(\"for (var key in {0}) {\", h);\n\t\tjs.Syntax.code(\"\\tif ({0}) {0} = false; else {1} += ',';\", first, s);\n\t\tjs.Syntax.code(\"\\t{0} += key + ' => ' + {1}({2}[key]);\", s, Std.string, h);\n\t\tjs.Syntax.code(\"}\");\n\t\treturn s + \"}\";\n\t}\n}\n#else\nprivate class StringMapIterator<T> {\n\tvar map:StringMap<T>;\n\tvar keys:Array<String>;\n\tvar index:Int;\n\tvar count:Int;\n\n\tpublic inline function new(map:StringMap<T>, keys:Array<String>) {\n\t\tthis.map = map;\n\t\tthis.keys = keys;\n\t\tthis.index = 0;\n\t\tthis.count = keys.length;\n\t}\n\n\tpublic inline function hasNext() {\n\t\treturn index < count;\n\t}\n\n\tpublic inline function next() {\n\t\treturn map.get(keys[index++]);\n\t}\n}\n\n@:coreApi class StringMap<T> implements haxe.Constraints.IMap<String, T> {\n\tprivate var h:Dynamic;\n\tprivate var rh:Dynamic;\n\n\tpublic inline function new():Void {\n\t\th = {};\n\t}\n\n\tinline function isReserved(key:String):Bool {\n\t\treturn js.Syntax.code(\"__map_reserved[{0}]\", key) != null;\n\t}\n\n\tpublic inline function set(key:String, value:T):Void {\n\t\tif (isReserved(key))\n\t\t\tsetReserved(key, value);\n\t\telse\n\t\t\th[cast key] = value;\n\t}\n\n\tpublic inline function get(key:String):Null<T> {\n\t\tif (isReserved(key))\n\t\t\treturn getReserved(key);\n\t\treturn h[cast key];\n\t}\n\n\tpublic inline function exists(key:String):Bool {\n\t\tif (isReserved(key))\n\t\t\treturn existsReserved(key);\n\t\treturn h.hasOwnProperty(key);\n\t}\n\n\tfunction setReserved(key:String, value:T):Void {\n\t\tif (rh == null)\n\t\t\trh = {};\n\t\trh[cast \"$\" + key] = value;\n\t}\n\n\tfunction getReserved(key:String):Null<T> {\n\t\treturn rh == null ? null : rh[cast \"$\" + key];\n\t}\n\n\tfunction existsReserved(key:String):Bool {\n\t\tif (rh == null)\n\t\t\treturn false;\n\t\treturn (cast rh).hasOwnProperty(\"$\" + key);\n\t}\n\n\tpublic function remove(key:String):Bool {\n\t\tif (isReserved(key)) {\n\t\t\tkey = \"$\" + key;\n\t\t\tif (rh == null || !rh.hasOwnProperty(key))\n\t\t\t\treturn false;\n\t\t\tjs.Syntax.delete(rh, key);\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif (!h.hasOwnProperty(key))\n\t\t\t\treturn false;\n\t\t\tjs.Syntax.delete(h, key);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic function keys():Iterator<String> {\n\t\treturn arrayKeys().iterator();\n\t}\n\n\tfunction arrayKeys():Array<String> {\n\t\tvar out = [];\n\t\tuntyped {\n\t\t\tjs.Syntax.code(\"for( var key in this.h ) {\");\n\t\t\tif (h.hasOwnProperty(key))\n\t\t\t\tout.push(key);\n\t\t\tjs.Syntax.code(\"}\");\n\t\t}\n\t\tif (rh != null)\n\t\t\tuntyped {\n\t\t\t\tjs.Syntax.code(\"for( var key in this.rh ) {\");\n\t\t\t\tif (key.charCodeAt(0) == \"$\".code)\n\t\t\t\t\tout.push(key.substr(1));\n\t\t\t\tjs.Syntax.code(\"}\");\n\t\t\t}\n\t\treturn out;\n\t}\n\n\tpublic inline function iterator():Iterator<T> {\n\t\treturn new StringMapIterator(this, arrayKeys());\n\t}\n\n\t@:runtime public inline function keyValueIterator():KeyValueIterator<String, T> {\n\t\treturn new haxe.iterators.MapKeyValueIterator(this);\n\t}\n\n\tpublic function copy():StringMap<T> {\n\t\tvar copied = new StringMap();\n\t\tfor (key in keys())\n\t\t\tcopied.set(key, get(key));\n\t\treturn copied;\n\t}\n\n\tpublic function toString():String {\n\t\tvar s = new StringBuf();\n\t\ts.add(\"{\");\n\t\tvar keys = arrayKeys();\n\t\tfor (i in 0...keys.length) {\n\t\t\tvar k = keys[i];\n\t\t\ts.add(k);\n\t\t\ts.add(\" => \");\n\t\t\ts.add(Std.string(get(k)));\n\t\t\tif (i < keys.length - 1)\n\t\t\t\ts.add(\", \");\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n\n\tpublic inline function clear():Void {\n\t\th = {};\n\t\trh = null;\n\t}\n\n\tstatic function __init__():Void {\n\t\tjs.Syntax.code(\"var __map_reserved = {};\");\n\t}\n}\n#end\n","/*\n * Copyright (C)2005-2018 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage haxe.iterators;\n\n/**\n\tThis iterator is used only when `Array<T>` is passed to `Iterable<T>`\n**/\nclass ArrayIterator<T> {\n\tfinal array:Array<T>;\n\tvar current:Int = 0;\n\n\t/**\n\t\tCreate a new `ArrayIterator`.\n\t**/\n\t#if !hl inline #end\n\tpublic function new(array:Array<T>) {\n\t\tthis.array = array;\n\t}\n\n\t/**\n\t\tSee `Iterator.hasNext`\n\t**/\n\t#if !hl inline #end\n\tpublic function hasNext() {\n\t\treturn current < array.length;\n\t}\n\n\t/**\n\t\tSee `Iterator.next`\n\t**/\n\t#if !hl inline #end\n\tpublic function next() {\n\t\treturn array[current++];\n\t}\n}\n","/*\n * Copyright (C)2005-2019 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage js;\n\nimport js.Syntax; // import it here so it's always available in the compiler\n\n@:dox(hide)\nclass Boot {\n\tstatic inline function isClass(o:Dynamic):Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isClass\", o.__name__);\n\t}\n\n\tstatic inline function isInterface(o:Class<Dynamic>):Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isInterface\", o.__isInterface__);\n\t}\n\n\tstatic inline function isEnum(e:Dynamic):Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isEnum\", e.__ename__);\n\t}\n\n\t@:pure static function getClass(o:Null<Dynamic>):Null<Dynamic> {\n\t\tif (o == null) {\n\t\t\treturn null;\n\t\t} else if (Std.isOfType(o, Array)) {\n\t\t\treturn Array;\n\t\t} else {\n\t\t\tvar cl = untyped __define_feature__(\"js.Boot.getClass\", o.__class__);\n\t\t\tif (cl != null)\n\t\t\t\treturn cl;\n\t\t\tvar name = __nativeClassName(o);\n\t\t\tif (name != null)\n\t\t\t\treturn __resolveNativeClass(name);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t@:ifFeature(\"has_enum\")\n\tprivate static function __string_rec(o, s:String) {\n\t\tuntyped {\n\t\t\tif (o == null)\n\t\t\t\treturn \"null\";\n\t\t\tif (s.length >= 5)\n\t\t\t\treturn \"<...>\"; // too much deep recursion\n\t\t\tvar t = js.Syntax.typeof(o);\n\t\t\tif (t == \"function\" && (isClass(o) || isEnum(o)))\n\t\t\t\tt = \"object\";\n\t\t\tswitch (t) {\n\t\t\t\tcase \"object\":\n\t\t\t\t\t#if !js_enums_as_arrays\n\t\t\t\t\t__feature__(\"has_enum\", if (o.__enum__) {\n\t\t\t\t\t\tvar e = $hxEnums[o.__enum__];\n\t\t\t\t\t\tvar n = e.__constructs__[o._hx_index];\n\t\t\t\t\t\tvar con = e[n];\n\t\t\t\t\t\tif (con.__params__) {\n\t\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\t\treturn n + \"(\" + [for (p in (con.__params__ : Array<String>)) __string_rec(o[p], s)].join(\",\") + \")\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t#end\n\t\t\t\t\tif (js.Syntax.instanceof(o, Array)) {\n\t\t\t\t\t\t#if js_enums_as_arrays\n\t\t\t\t\t\t__feature__(\"has_enum\", if (o.__enum__) {\n\t\t\t\t\t\t\tif (o.length == 2)\n\t\t\t\t\t\t\t\treturn o[0];\n\t\t\t\t\t\t\tvar str = o[0] + \"(\";\n\t\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\t\tfor (i in 2...o.length) {\n\t\t\t\t\t\t\t\tif (i != 2)\n\t\t\t\t\t\t\t\t\tstr += \",\" + __string_rec(o[i], s);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tstr += __string_rec(o[i], s);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn str + \")\";\n\t\t\t\t\t\t});\n\t\t\t\t\t\t#end\n\t\t\t\t\t\tvar str = \"[\";\n\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\tfor (i in 0...o.length)\n\t\t\t\t\t\t\tstr += (if (i > 0) \",\" else \"\") + __string_rec(o[i], s);\n\t\t\t\t\t\tstr += \"]\";\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t}\n\t\t\t\t\tvar tostr;\n\t\t\t\t\ttry {\n\t\t\t\t\t\ttostr = untyped o.toString;\n\t\t\t\t\t} catch (e:Dynamic) {\n\t\t\t\t\t\t// strange error on IE\n\t\t\t\t\t\treturn \"???\";\n\t\t\t\t\t}\n\t\t\t\t\tif (tostr != null && tostr != js.Syntax.code(\"Object.toString\") && js.Syntax.typeof(tostr) == \"function\") {\n\t\t\t\t\t\tvar s2 = o.toString();\n\t\t\t\t\t\tif (s2 != \"[object Object]\")\n\t\t\t\t\t\t\treturn s2;\n\t\t\t\t\t}\n\t\t\t\t\tvar str = \"{\\n\";\n\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\tvar hasp = (o.hasOwnProperty != null);\n\t\t\t\t\tvar k:String = null;\n\t\t\t\t\tjs.Syntax.code(\"for( {0} in {1} ) {\", k, o);\n\t\t\t\t\tif (hasp && !o.hasOwnProperty(k))\n\t\t\t\t\t\tjs.Syntax.code(\"continue\");\n\t\t\t\t\tif (k == \"prototype\" || k == \"__class__\" || k == \"__super__\" || k == \"__interfaces__\" || k == \"__properties__\")\n\t\t\t\t\t\tjs.Syntax.code(\"continue\");\n\t\t\t\t\tif (str.length != 2)\n\t\t\t\t\t\tstr += \", \\n\";\n\t\t\t\t\tstr += s + k + \" : \" + __string_rec(o[k], s);\n\t\t\t\t\tjs.Syntax.code(\"}\");\n\t\t\t\t\ts = s.substring(1);\n\t\t\t\t\tstr += \"\\n\" + s + \"}\";\n\t\t\t\t\treturn str;\n\t\t\t\tcase \"function\":\n\t\t\t\t\treturn \"<function>\";\n\t\t\t\tcase \"string\":\n\t\t\t\t\treturn o;\n\t\t\t\tdefault:\n\t\t\t\t\treturn String(o);\n\t\t\t}\n\t\t}\n\t}\n\n\t@:pure private static function __interfLoop(cc:Dynamic, cl:Dynamic) {\n\t\tif (cc == null)\n\t\t\treturn false;\n\t\tif (cc == cl)\n\t\t\treturn true;\n\t\tvar intf:Dynamic = cc.__interfaces__;\n\t\tif (intf != null\n\t\t\t// ES6 classes inherit statics, so we want to avoid accessing inherited `__interfaces__`\n\t\t\t#if (js_es >= 6) && (cc.__super__ == null || cc.__super__.__interfaces__ != intf) #end\n\t\t) {\n\t\t\tfor (i in 0...intf.length) {\n\t\t\t\tvar i:Dynamic = intf[i];\n\t\t\t\tif (i == cl || __interfLoop(i, cl))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn __interfLoop(cc.__super__, cl);\n\t}\n\n\t@:pure private static function __instanceof(o:Dynamic, cl:Dynamic) {\n\t\tif (cl == null)\n\t\t\treturn false;\n\t\tswitch (cl) {\n\t\t\tcase Int:\n\t\t\t\treturn js.Syntax.typeof(o) == \"number\" && js.Syntax.strictEq(o | 0, o);\n\t\t\tcase Float:\n\t\t\t\treturn js.Syntax.typeof(o) == \"number\";\n\t\t\tcase Bool:\n\t\t\t\treturn js.Syntax.typeof(o) == \"boolean\";\n\t\t\tcase String:\n\t\t\t\treturn js.Syntax.typeof(o) == \"string\";\n\t\t\tcase Array:\n\t\t\t\treturn js.Syntax.instanceof(o, Array) #if js_enums_as_arrays && o.__enum__ == null #end;\n\t\t\tcase Dynamic:\n\t\t\t\treturn o != null;\n\t\t\tdefault:\n\t\t\t\tif (o != null) {\n\t\t\t\t\t// Check if o is an instance of a Haxe class or a native JS object\n\t\t\t\t\tif (js.Syntax.typeof(cl) == \"function\") {\n\t\t\t\t\t\tif (__downcastCheck(o, cl))\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (js.Syntax.typeof(cl) == \"object\" && __isNativeObj(cl)) {\n\t\t\t\t\t\tif (js.Syntax.instanceof(o, cl))\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// do not use isClass/isEnum here\n\t\t\t\tuntyped __feature__(\"Class.*\", if (cl == Class && o.__name__ != null) return true);\n\t\t\t\tuntyped __feature__(\"Enum.*\", if (cl == Enum && o.__ename__ != null) return true);\n\t\t\t\t#if js_enums_as_arrays\n\t\t\t\treturn o.__enum__ == cl;\n\t\t\t\t#else\n\t\t\t\treturn untyped __feature__(\n\t\t\t\t\t\"has_enum\",\n\t\t\t\t\tif (o.__enum__ != null) ($hxEnums[o.__enum__]) == cl else false,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\t#end\n\t\t}\n\t}\n\n\tstatic function __downcastCheck(o:Dynamic, cl:Class<Dynamic>):Bool {\n\t\treturn js.Syntax.instanceof(o, cl) || (isInterface(cl) && inline __implements(o, cl));\n\t}\n\n\tstatic function __implements(o:Dynamic, iface:Class<Dynamic>):Bool {\n\t\treturn __interfLoop(getClass(o), iface);\n\t}\n\n\t@:ifFeature(\"typed_cast\") private static function __cast(o:Dynamic, t:Dynamic) {\n\t\tif (o == null || __instanceof(o, t))\n\t\t\treturn o;\n\t\telse\n\t\t\tthrow \"Cannot cast \" + Std.string(o) + \" to \" + Std.string(t);\n\t}\n\n\tstatic var __toStr:js.lib.Function;\n\n\tstatic function __init__() {\n\t\tBoot.__toStr = (cast {}).toString;\n\t}\n\n\t// get native JS [[Class]]\n\tstatic function __nativeClassName(o:Dynamic):String {\n\t\tvar name:String = __toStr.call(o).slice(8, -1);\n\t\t// exclude general Object and Function\n\t\t// also exclude Math and JSON, because instanceof cannot be called on them\n\t\tif (name == \"Object\" || name == \"Function\" || name == \"Math\" || name == \"JSON\")\n\t\t\treturn null;\n\t\treturn name;\n\t}\n\n\t// check for usable native JS object\n\tstatic function __isNativeObj(o:Dynamic):Bool {\n\t\treturn __nativeClassName(o) != null;\n\t}\n\n\t// resolve native JS class in the global scope:\n\tstatic function __resolveNativeClass(name:String) {\n\t\treturn js.Lib.global[cast name];\n\t}\n}\n"],
"names":[],
"mappings":"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"
}